<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <Ice_CppMapping>cpp98</Ice_CppMapping>
        <Ice_BuildingSrc Condition="'$(Ice_BuildingSrc)' == ''">yes</Ice_BuildingSrc>
    </PropertyGroup>
    <Import Project="$(MSBuildThisFileDirectory)\..\..\ice\cpp\msbuild\ice.cpp.props" />

    <PropertyGroup Condition="'$(UseBinDist)' != 'yes'">
        <FreezeHome>$(MSBuildThisFileDirectory)..\..</FreezeHome>
        <FreezeToolsPath>$(FreezeHome)\cpp\bin\$(Platform)\$(Configuration)</FreezeToolsPath>
    </PropertyGroup>

    <!-- Define some common properties -->
    <PropertyGroup>
        <Freeze_SrcRootDir>$([System.IO.Path]::GetFullPath('$(MSBuildThisFileDirectory)\..'))</Freeze_SrcRootDir>
        <OutDir>$(Freeze_SrcRootDir)\bin\$(Platform)\$(Configuration)\</OutDir>
    </PropertyGroup>

    <ItemDefinitionGroup Condition="'$(UseBinDist)' != 'yes'">
        <ClCompile>
            <AdditionalIncludeDirectories>$(Freeze_SrcRootDir)\include\generated\$(Platform)\$(Ice_Configuration);
                                          $(Freeze_SrcRootDir)\include;$(Freeze_SrcRootDir)\src;
                                          %(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
        </ClCompile>
        <Link>
            <AdditionalLibraryDirectories>$(Freeze_SrcRootDir)\lib\$(Platform)\$(Ice_Configuration)</AdditionalLibraryDirectories>
        </Link>
    </ItemDefinitionGroup>

    <ItemDefinitionGroup Condition="'$(ConfigurationType)' == 'DynamicLibrary' And '$(UseBinDist)' != 'yes'">
        <Link>
            <ImportLibrary>$(Freeze_SrcRootDir)\lib\$(Platform)\$(Ice_Configuration)\$(TargetName).lib</ImportLibrary>
        </Link>
    </ItemDefinitionGroup>

</Project>
